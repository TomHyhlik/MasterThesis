% arara: pdflatex: { synctex: yes }
% arara: makeindex: { style: ctuthesis }
% arara: bibtex

% The class takes all the key=value arguments that \ctusetup does,
% and a couple more: draft and oneside
\documentclass[oneside]{ctuthesis}

\usepackage{siunitx}
\usepackage{nomencl}
\usepackage{setspace}
\usepackage{indentfirst}

%%%%%%%%%%%%%%%%%% insert images from other directory
\usepackage{graphicx}
\graphicspath{{./images/}}


\usepackage{pdfpages}	
\usepackage{longtable}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% this shit is here to break long url into more lines
\usepackage{url}
\makeatletter
\g@addto@macro{\UrlBreaks}{\UrlOrds}
%\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% this shit is here to prevent breaking words on the edge of a line
\tolerance=1
\emergencystretch=\maxdimen
\hyphenpenalty=10000
\hbadness=10000


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% force urls in the bibliography to split
\def\UrlBreaks{\do\/\do-\do9}
\usepackage{breakurl}

 
%%%%%%%%%%%%%%%%%%%%%%%%%%.this makes the differed text make different
%DIF PREAMBLE EXTENSION ADDED BY LATEXDIFF
%DIF UNDERLINE PREAMBLE %DIF PREAMBLE
\RequirePackage[normalem]{ulem} %DIF PREAMBLE
\RequirePackage{color}\definecolor{RED}{rgb}{1,0,0}\definecolor{BLUE}{rgb}{0,0,1} %DIF PREAMBLE
\providecommand{\DIFadd}[1]{{\protect\color{blue}\uwave{#1}}} %DIF PREAMBLE
\providecommand{\DIFdel}[1]{{\protect\color{red}\sout{#1}}}                      %DIF PREAMBLE
%DIF SAFE PREAMBLE %DIF PREAMBLE
\providecommand{\DIFaddbegin}{} %DIF PREAMBLE
\providecommand{\DIFaddend}{} %DIF PREAMBLE
\providecommand{\DIFdelbegin}{} %DIF PREAMBLE
\providecommand{\DIFdelend}{} %DIF PREAMBLE
%DIF FLOATSAFE PREAMBLE %DIF PREAMBLE
\providecommand{\DIFaddFL}[1]{\DIFadd{#1}} %DIF PREAMBLE
\providecommand{\DIFdelFL}[1]{\DIFdel{#1}} %DIF PREAMBLE
\providecommand{\DIFaddbeginFL}{} %DIF PREAMBLE
\providecommand{\DIFaddendFL}{} %DIF PREAMBLE
\providecommand{\DIFdelbeginFL}{} %DIF PREAMBLE
\providecommand{\DIFdelendFL}{} %DIF PREAMBLE
%DIF END PREAMBLE EXTENSION ADDED BY LATEXDIFF


% to print code
\usepackage{listings}
\usepackage{color}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\lstset{frame=tb,
  language=C++,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none, 
  % numberstyle=\tiny\color{gray},
  % keywordstyle=\color{blue},
  % commentstyle=\color{dkgreen},
  % stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}
% to display source code
\definecolor{mGreen}{rgb}{0,0.6,0}
\definecolor{mGray}{rgb}{0.5,0.5,0.5}
\definecolor{mPurple}{rgb}{0.58,0,0.82}
\definecolor{backgroundColour}{rgb}{0.95,0.95,0.92}
\lstdefinestyle{CStyle}{
    backgroundcolor=\color{backgroundColour},   
    commentstyle=\color{mGreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{mGray},
    stringstyle=\color{mPurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2,
    language=C
}
\lstdefinestyle{log}{
    backgroundcolor=\color{backgroundColour},   
    % commentstyle=\color{mGreen},
    % keywordstyle=\color{magenta},
    % numberstyle=\tiny\color{mGray},
    % stringstyle=\color{mPurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    % captionpos=b,                    
    keepspaces=true,                 
    numbers=none,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2,
    language=C
}


%%%
% \usepackage{framed}
% \usepackage{hyperref}
% % \usepackage[czech]{babel}
% \usepackage[utf8]{inputenc}
% \usepackage[T1]{fontenc}

\usepackage{dirtree}        %directory tree visualisation
\usepackage{blindtext}
\parskip=12pt % adds vertical space between paragraphs

\usepackage{xcolor}
\definecolor{shadecolor}{RGB}{230,230,230}

% to print code
\usepackage{listings}
\usepackage{color}
%%%

\ctusetup{
%	preprint = \ctuverlog,```%%%%%%%%%%%%%%%%%%%%%%%%% toto je cislo na kazde strance dole ktere tam nema byt
%	mainlanguage = english,
%	titlelanguage = english,
	mainlanguage = czech,
	otherlanguages = {czech},
	% title-czech = {Low power wireless sensor network},
	title-czech = {Bezdrátová senzorová síť pro přístupový systém},
	title-english = {Wireless sensor network for access control system},
	subtitle-czech = {},
	subtitle-english = {},
	faculty = F3,
	department-czech = {Katedra telekomunikační techniky},
	department-english = {Department of Telecommunications Engineering},
	author = {Bc. Tomáš Hyhlík},
	supervisor = {Ing. Bc. Marek Neruda, Ph.D},
	supervisor-address = {},
	supervisor-specialist = {doc. Ing. Lukáš Vojtěch, Ph.D},
	fieldofstudy-english = {Electronics and Communications},
	subfieldofstudy-english = {Electronics},
	fieldofstudy-czech = {Elektronika a komunikace},
	subfieldofstudy-czech = {Elektronika},
	keywords-czech = {LoRa, LPWAN, přístupový systém, WSN.},
	keywords-english = {Access control system, LoRa, LPWAN, WSN.},
	day = 20,
	month = 5,
	year = 2020,
	specification-file = {zav_prace.pdf},
%	front-specification = true,
%	front-list-of-figures = false,
%	front-list-of-tables = false,
%	monochrome = true,
%	layout-short = true,
}

\ctuprocess

\addto\ctucaptionsczech{%
	\def\supervisorname{Vedoucí}%
	\def\subfieldofstudyname{Studijní program}%
}

\ctutemplateset{maketitle twocolumn default}{
	\begin{twocolumnfrontmatterpage}
		% \ctutemplate{twocolumn.thanks}
		% \ctutemplate{twocolumn.declaration}
		\ctutemplate{twocolumn.abstract.in.titlelanguage}
		\ctutemplate{twocolumn.abstract.in.secondlanguage}	
		\ctutemplate{twocolumn.tableofcontents}
		\ctutemplate{twocolumn.listoffigures}
	\end{twocolumnfrontmatterpage}
}

% Theorem declarations, this is the reasonable default, anybody can do what they wish.
% If you prefer theorems in italics rather than slanted, use \theoremstyle{plainit}
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{conjecture}[theorem]{Conjecture}

\theoremstyle{note}
\newtheorem*{remark*}{Remark}
\newtheorem{remark}[theorem]{Remark}

\setlength{\parskip}{5ex plus 0.2ex minus 0.2ex}

% Abstract in Czech
\begin{abstract-czech}
Senzorové sítě hrají důležitou roli v internetu věcí (IoT). Jsou vhodné pro aplikace v budovách, umožňující pohodlně sbírat data ze senzorů a ovládání aktuátorů v budově a jejím okolí.  
	%Nowadays, existing intelligent buildings include some electronic systems, such as access control systems. 
	%As the WSN becomes neccesary, the effort of imlementation of WSN into existing smart buildings grow.
	%It may be easier and cheaper to extend an existing electronic system with WSN instead of integrating an entire new WSN system into the building.
Tato práce obsahuje návrh rozšíření existujícího přístupového systému o senzorovou síť. 
Je zde navržena jednokanálová LoRa gateway senzorové sítě připojena do sítě RS485 přístupového systému. 
Výsledky měření dlouhodobého provozu v jednom bloku univerzity ukazují, že maximální počet koncových zařízení senzorové sítě současně odesílajících data na gateway, může být až stovky či tisíce v závislosti na použité přenosové rychlosti dat sítě RS485 přístupového systému a použité rezervě přenosové rychlosti dat, která zabraňuje selhání funkce přístupového systému. Výsledky dokazují, že navrženou senzorovou síť lze efektivně využít v této infrastruktuře.
Dále jsou zde diskutovány možnosti vylepšení navrženého řešení a je proveden návrh vylepšení prototypu navržené gatewaye.
\end{abstract-czech}

% Abstract in English
\begin{abstract-english}
The Wireless Sensor Network (WSN) plays an important role in the Internet of Things (IoT). 
It is very suitable for intelligent buildings providing a convenient way to collect sensor data and control electronic devices in the building and its surroundings.
%Nowadays, existing intelligent buildings include some electronic systems, such as access control systems. 
%As the WSN becomes neccesary, the effort of imlementation of WSN into existing smart buildings grow.
%It may be easier and cheaper to extend an existing electronic system with WSN instead of integrating an entire new WSN system into the building.
This work proposes an extension of the existing access control system with WSN. Design of single-channel LoRa gateway connected to the existing RS485 network is performed. The results of a long-term operation measurement in one university floor show the maximum number of sensor nodes simultaneously transmitting data in RS485 network is up to hundreds or thousands in dependence on used RS485 data rate and used reserve of data rate which prevent from malfunction of the access control system. The results prove the WSN can be effectively used in an existing RS485 infrastructure. 
There are also discussed conditions of improvement of the design and upgrade of the designed gateway is performed.
\end{abstract-english}


% Acknowledgements / Podekovani
\begin{thanks}
Rád bych poděkoval lidem, kteří se na této práci podíleli, to jsou z univerzity ČVUT FEL Ing. Bc. Marek Neruda Ph.D, Ing. Bc. Pavel Bezpalec Ph.D a doc. Ing. Lukáš Vojtěch Ph.D a z firmy IMA Ing. Vlastimil Beneš. 
% za poskytnutí informací, prostředků a pomoci v rámci práce s přístupovým systémem.
\end{thanks}


% Declaration / Prohlaseni
\begin{declaration}
Prohlašuji,  že  jsem  předloženou  práci  vypracoval samostatně a že jsem uvedl veškeré použité informační zdroje v souladu s Metodickým pokynem o dodržování etických principů při přípravě vysokoškolských závěrečných prací.

V Praze, \ctufield{day}.~\monthinlanguage{title}~\ctufield{year}

% I declare that I have developed the presented work independently and that I have
% listed all information sources used in accordance with the Methodical Guidelines on
% Maintaining Ethical Principles During the Preparation of Higher Education Theses.

% In Prague, \ctufield{day}.~\monthinlanguage{title}~\ctufield{year}
\end{declaration}

% Only for testing purposes
\listfiles
\usepackage[pagewise]{lineno}
\usepackage{lipsum,blindtext}
\usepackage{mathrsfs} % provides \mathscr used in the ridiculous examples

\newcommand{\abbrlabel}[1]{\makebox[3cm][l]{\textbf{#1}\ \dotfill}}
\newenvironment{abbreviations}{\begin{list}{}{\renewcommand{\makelabel}{\abbrlabel}}}{\end{list}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  BEGIN %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}



\maketitle

\includepdf[pages={1}]{zav_prace.pdf}


% \ctutemplate{specification.as.chapter}       % ZADANI

%\rule{\linewidth}{1pt}     % this shit was here for the url cut
\titlespacing*{\chapter}					{0pt}	{0ex}{0ex}
\titlespacing*{\section} 					{0pt}	{0ex}{-3ex}
\titlespacing*{\subsection} 			{0pt}	{0ex}{-3ex}
\titlespacing*{\subsubsection}		 {0pt}	{0ex}{-4ex}
\titlespacing*{\paragraph} 			{0pt}	{0ex}{-4ex}
\titlespacing*{\aubparagraph} 		{0pt}	{0ex}{-4ex}


% \setcounter{secnumdepth}{0} %% no section numbering

% \section{List of Abbreviations}
\section{Seznam zkratek}
\begin{abbreviations}
	\item[AES]		Advanced Encryption Standard 
	\item[AI]		Artifical Inteligence
	\item[AppSKey]	Application Session Key	
	\item[ASCII] 	American Standard Code for Information Interchange
	\item[BLE]		Bluetooth Low Energy 
	\item[CMAC]		Cipher-based message authentication code 
	\item[CMSIS]	Cortex Microcontroller Software Interface Standard  
	\item[CPU]		Central Processing Unit
	\item[CR] 		Carriage Return
	\item[CRC] 		Cyclic Redundancy Check
	\item[EEPROM] 	Electrically Erasable Programmable Read-Only Memory
	\item[FIFO]		First In First Out 
	\item[GPIO]		General Purpose Input Output 
	\item[HAL]		Hardware Abstraction Layer 
	\item[HW]		HardWare
	\item[IDE]		Integrated Development Environment 
	\item[IoT] 		Internet of Things
	\item[ISM]		Industrial, scientific and medical 
	\item[IWDG]		Independent Watchdog 
	\item[LAN]		Local Area Network
	\item[LBT]		Listen Before Talk 
	\item[LF]		Line Feed 
	\item[LPWAN]   	Low Power Wide Area Network 
	\item[LPWSN] 	Low Power Wireless Sensor Network	
	\item[LTE-M] 	Long Term Evolution-Machine Type Communication 
	\item[MCU] 		Micro Controller Unit
	\item[NB-IoT] 	NarrowBand-Internet of Things   
	\item[NwkSKey]	Network Session Key
	\item[PC]		Personal Computer 
	\item[PCB]		Printed Circuit Board 
	\item[RF]		Radio Frequency
	\item[RTOS]		Real Time Operating System 
	% \item[I2C]   	Inter-integrated Circuit
	% \item[IPv6] 	Internet Protocol version 6
	% \item[M2M]		machine to machine
	% \item[RPMA]		Random Phase Multiple Access
	\item[SDK]	 	Software development kit
	\item[SF]		Spreading Factor
	\item[SPI]   	Serial Peripheral Interface 
	\item[SWP]		Single Wire 
	\item[TTN] 		The Things Network
	\item[UART]		Universal Asynchronous Receiver Transmitter 
	\item[UID]		Unique Identifier 
	\item[ULP]		Ultra Low Power 
	\item[USB]		Universal Serial Bus 
	\item[WSN]		Wireless Sensor Network

\end{abbreviations}

% \setcounter{secnumdepth}{1} %% start section numbering



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{chapter_01_introduction_new.tex}

\part{Theoretical part}
									
\input{chapter_02_aCtrlSystems_new.tex}
\input{chapter_03_LPWSN_new.tex}

\part{Practical part}

\input{chapter_04_deviceDesign_new.tex}
\input{chapter_05_testAndResults_new.tex}
\input{chapter_06_deviceImprove_new.tex}
\input{chapter_07_conclusions_new.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\bibliographystyle{amsalpha}
\input{references.tex}


\appendix
\chapter{Odborný článek}
V rámci tohoto výzkumného projektu byl vytvořen odborný článek. V následné podobě byl odeslán do oponentního řízení.


\includepdf[pages={1,2,3,4,5,6,7,8}]{paper_Implementation_of_LPWSN_into_access_control_system.pdf}











%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% END document
\end{document}ß